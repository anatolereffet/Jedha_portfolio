import scrapy
import json
import os

class HotelSpider(scrapy.Spider):
    name = 'hotel'
    allowed_domains = ['booking.com']
    USER_AGENT = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 12_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36'
    custom_settings = {"AUTOTHROTTLE_ENABLED":'True', 'CONCURRENT_REQUESTS':'10'}



    def start_requests(self):    
        start_urls = ['https://www.booking.com/searchresults.fr.html?label=gen173nr-1DCAEoggI46AdIDVgEaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Aqnj0I8GwAIB0gIkNDI1ZjUxZDktMTM3Zi00ZmY2LWFjZjUtOTVlOTZhZjlmMmE12AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Flabel%3Dgen173nr-1DCAEoggI46AdIDVgEaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Aqnj0I8GwAIB0gIkNDI1ZjUxZDktMTM3Zi00ZmY2LWFjZjUtOTVlOTZhZjlmMmE12AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=mont+saint+michel&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=99547fd4bb8e01e8&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=st+malo&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&ss_raw=s&search_pageview_id=42c5804c88b800a6',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=bayeux&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=le+havre&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=Rouen&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=paris&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=amiens&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=lille&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=strasbourg&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false&ss_raw=strat',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=Chateau+du+Haut+Koenigsbourg%09&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&ss_raw=Chateau+du+Haut+Koenigsbourg%09&search_pageview_id=42c5804c88b800a6',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=Colmar&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=Eguisheim&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&ss_raw=Eguisheim&search_pageview_id=42c5804c88b800a6',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=Besancon&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&ss_raw=Besancon&search_pageview_id=42c5804c88b800a6',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=dijon&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=annecy&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=grenoble&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=lyon&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=bormes+les+mimosas&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=cassis&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=marseille&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=aix+en+provence&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=avignon&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=uzes&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=nimes&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=Aigues+Mortes%09&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=saintes+maries+de+la+mer&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=Collioure&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&ss_raw=Collioure&search_pageview_id=42c5804c88b800a6',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=Carcassonne&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&ss_raw=Carcassonne&search_pageview_id=42c5804c88b800a6',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=Toulouse&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=Montauban&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=Biarritz&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&ss_raw=Biarritz&search_pageview_id=42c5804c88b800a6',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=Bayonne&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false',
                      'https://www.booking.com/searchresults.fr.html?aid=397594&label=gog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB&sid=6385ab5e5b401b7fccbcd7c22ba00b5e&sb=1&sb_lp=1&src=index&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Findex.fr.html%3Faid%3D397594%3Blabel%3Dgog235jc-1DCAEoggI46AdIDVgDaE2IAQGYAQ24AQfIAQzYAQPoAQH4AQKIAgGoAgO4Apnl0I8GwAIB0gIkNmYyOGUxYjctNzNjYy00MTIwLWIyMGUtMjM4NjU0NWY0ODAw2AIE4AIB%3Bsid%3D6385ab5e5b401b7fccbcd7c22ba00b5e%3Bsb_price_type%3Dtotal%26%3B&ss=La+rochelle&is_ski_area=0&checkin_year=&checkin_month=&checkout_year=&checkout_month=&group_adults=1&group_children=0&no_rooms=1&b_h4u_keep_filters=&from_sf=1&dest_id=&dest_type=&search_pageview_id=42c5804c88b800a6&search_selected=false'
                    ]
        
        headers = {
            'Connection': 'keep-alive',
            'Cache-Control': 'max-age=0',
            'DNT': '1',
            'Upgrade-Insecure-Requests': '1',
            'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 12_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36',
            'Sec-Fetch-User': '?1',
            'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3',
            'Sec-Fetch-Site': 'same-origin',
            'Sec-Fetch-Mode': 'navigate',
            'Accept-Encoding': 'gzip, deflate, br',
            'Accept-Language': 'fr-FR,en;q=0.9',
        }

        for url in start_urls:
            yield scrapy.Request(url=url, headers = headers, callback=self.parse)
    
        # Parse function for form request
    def parse(self, response):
        #city = response.url.split("/")[-1].replace(".fr.html", "")
        hotels = response.css('div._fe1927d9e._0811a1b54._a8a1be610._022ee35ec.b9c27d6646.fb3c4512b4.fc21746a73')
        
        
        for hotel in hotels:
            yield {
                #'city': 
                'name': hotel.css('div.fde444d7ef._c445487e2::text').get(),
                'url': hotel.css('a.fb01724e5b::attr(href)').get(),
                'address': hotel.css('span.af1ddfc958.eba89149fb::text').get(),
                'image_url': hotel.css('img.e75f1d9859::attr(src)').get(),
                'score': hotel.css('div._9c5f726ff.bd528f9ea6::text').get(),
                'description': hotel.css('div._4abc4c3d5::text').get()
            }

    def parse_html(self, response):
        page = response.url.split("/")

        filename = response.url.split("/")[-1]
        with open(filename, 'wb') as f:
            f.write(response.body)
        self.log(f'Saved file {filename}')
#use in terminal, save it in json format
# scrapy crawl hotel -o bookingscraptest.json 
